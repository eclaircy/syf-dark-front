<template>
    <div id="node-count-pie"></div>
</template>

<script>
import { Pie } from '@antv/g2plot';
export default {
    // props: {
    //     nodeCount: {
    //         type: Array,
    //         required: true
    //     }
    // },
    props:["nodeCount"],
    watch: {
        nodeCount: function(newVal, oldVal) {
        // 当 graphData 数据变化时执行渲染的逻辑
            this.showPie();
        }
    },
    methods: {
        showPie(){      
            // const data = [
            // { type: '域名', value: 27 },
            // { type: 'IP', value: 25 },
            // { type: '公司', value: 18 },
            // { type: '人员', value: 15 },
            // { type: '跳转链接', value: 10 },
            // { type: '其他', value: 5 },
            // ];
            const data = this.nodeCount;
            const piePlot = new Pie('node-count-pie', {
                appendPadding: 10,
                data,
                angleField: 'value',
                colorField: 'type',
                radius: 1,
                innerRadius: 0.6,
                label: {
                    type: 'inner',
                    offset: '-50%',
                    content: '{value}',
                    style: {
                    textAlign: 'center',
                    fontSize: 10,
                    },
                },
                interactions: [{ type: 'element-selected' }, { type: 'element-active' }],
                statistic: {
                    title: false,
                    content: {
                    style: {
                        whiteSpace: 'pre-wrap',
                        overflow: 'hidden',
                        textOverflow: 'ellipsis',
                    },
                    content: '',
                    },
                },
            });

            piePlot.render();

        }
    },
    mounted(){

    }
}
</script>