<template>
<!-- TODO: https://blog.csdn.net/qq_45453266/article/details/105680123 -->
    <div class="indexSearch">
        <div id="container" class="wordcloud-container"></div>
        <picture>
            <!-- <img alt="FOFA" src="https://static.fofa.info/_nuxt/fofa/img/logo.d9ee5c4.png" class="indexLogo"> -->
            <img src="./logo.png">
            <!-- <span>Rouge Killer</span> -->
        </picture>
        <!-- TODO:加入上传文件功能 -->
        <el-input placeholder="请输入待检测的网址链接" v-model="input" class="input" clearable>
            <el-button slot="append" icon="el-icon-search" @click="detectSite()" ></el-button>
        </el-input>
    </div>
</template>


<script>
import { WordCloud } from '@antv/g2plot';

export default {
    data(){
        return{
            input:'',
        }
    },

    methods:{
        detectSite(){
            this.$message({
                message: '成功创建检测任务',
                type: 'success'
            });

            this.axios({ //像后端请求检测网站接口:如果在数据库中则展示数据库，如果不在则调用模型检测
                url:"",
                method:"post",
                param:{"url":this.input}
            }).then(res=>{
                
            })
        },
        showWordCloud(){ //展示Rouge Killer形状的词云
            
            fetch('https://gw.alipayobjects.com/os/antvdemo/assets/data/antv-keywords.json')
            .then((res) => res.json())
            .then((data) => {
                var official = "https://cn.bing.com/images/search?view=detailV2&ccid=AZ0hM5c6&id=67F867A17C598D9996CAC4EFF325D6CF38C26410&thid=OIP.AZ0hM5c6oeDj35DUrdPFoAHaDP&mediaurl=https%3a%2f%2fwww.shentoushi.top%2fPublic%2fhome%2fimages%2ficons%2ffofa.png&exph=250&expw=571&q=Fofa%e5%9b%be%e6%a0%87&simid=608050550774761745&FORM=IRPRST&ck=1AAC9BA2688F50244C90A930010F865F&selectedIndex=0&idpp=overlayview&ajaxhist=0&ajaxserp=0";
                var fofa = "https://static.fofa.info/_nuxt/fofa/img/logo.d9ee5c4.png"
                const wordCloud = new WordCloud('container', {
                data,
                wordField: 'name',
                weightField: 'value',
                colorField: 'value',
                //https://cn.bing.com/images/search?view=detailV2&ccid=AZ0hM5c6&id=67F867A17C598D9996CAC4EFF325D6CF38C26410&thid=OIP.AZ0hM5c6oeDj35DUrdPFoAHaDP&mediaurl=https%3a%2f%2fwww.shentoushi.top%2fPublic%2fhome%2fimages%2ficons%2ffofa.png&exph=250&expw=571&q=Fofa%e5%9b%be%e6%a0%87&simid=608050550774761745&FORM=IRPRST&ck=1AAC9BA2688F50244C90A930010F865F&selectedIndex=0&idpp=overlayview&ajaxhist=0&ajaxserp=0
                //'https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*07tdTIOmvlYAAAAAAAAAAABkARQnAQ'
                
                imageMask: fofa,
                wordStyle: {
                    fontFamily: 'Verdana',
                    fontSize: [8, 32],
                },
                });
                wordCloud.render();
            });
        }
    },
    mounted(){
        // this.showWordCloud();
    }




}
</script>


<style scoped>

    .input{
        margin-top: 40px;
        
    }

    /deep/ .el-input__inner{
        border: 1px solid #a298a2;
        height: 50px;
        /*border-radius: 24px;*/
    }

    /deep/ .el-input-group__append, .el-input-group__prepend{
        border: 1px solid #a298a2;
    }

    .indexSearch {
        left: 0;
        margin: auto;
        max-width: 922px;
        position: absolute;
        right: 0;
        top: 25vh;
        width: 48%;
        z-index: 100;
    }
    .indexSearch .indexLogo {
        display: block;
        height: 90px;
        margin: 0 auto;
        width: 238px;
    }
    /*.wordcloud-container{
        height:200px;
        width:300px
    }*/
</style>